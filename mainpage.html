<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Reels-Style Front Page</title>
    <style>
      :root {
        --bg: #0d0d0d;
        --text: #f1f1f1;
        --muted: #c9c9c9;
        --accent: #fe2c55;
        --panel: rgba(0, 0, 0, 0.35);
        --panel-strong: rgba(0, 0, 0, 0.55);
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
        margin: 0;
        background: var(--bg);
        color: var(--text);
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial,
          sans-serif;
      }
      a {
        color: inherit;
        text-decoration: none;
      }

      .topbar {
        position: fixed;
        inset: 0 0 auto 0;
        height: 56px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 16px;
        z-index: 50;
        background: linear-gradient(
          180deg,
          rgba(0, 0, 0, 0.6),
          rgba(0, 0, 0, 0)
        );
        pointer-events: none;
      }
      .topbar > * {
        pointer-events: auto;
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 700;
      }
      .brand .dot {
        width: 10px;
        height: 10px;
        border-radius: 999px;
        background: var(--accent);
      }
      .search {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border-radius: 999px;
        background: var(--panel);
        border: 1px solid rgba(255, 255, 255, 0.08);
        min-width: 220px;
      }
      .search input {
        background: transparent;
        border: 0;
        outline: 0;
        color: var(--text);
        width: 200px;
      }
      .tabs {
        display: flex;
        gap: 8px;
        background: var(--panel);
        padding: 4px;
        border-radius: 999px;
        backdrop-filter: blur(6px);
        border: 1px solid rgba(255, 255, 255, 0.08);
      }
      .tabs button {
        color: var(--muted);
        background: transparent;
        border: 0;
        padding: 8px 14px;
        border-radius: 999px;
        font-weight: 600;
        cursor: pointer;
      }
      .tabs button.active {
        background: #fff;
        color: #000;
      }

      .feed {
        position: relative;
        height: 100dvh;
        overflow-y: scroll;
        scroll-snap-type: y mandatory;
        scroll-behavior: smooth;
      }
      .reel {
        position: relative;
        height: 100dvh;
        width: 100%;
        scroll-snap-align: start;
        display: grid;
        place-items: center;
        overflow: hidden;
        background: #000;
      }
      .video-wrap {
        position: absolute;
        inset: 0;
        display: grid;
        place-items: center;
      }
      .video {
        height: 100%;
        width: auto;
        object-fit: cover;
      }

      .actions {
        position: absolute;
        right: 14px;
        bottom: 110px;
        display: flex;
        flex-direction: column;
        gap: 18px;
        align-items: center;
        z-index: 3;
      }
      .action {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 6px;
        cursor: pointer;
        user-select: none;
      }
      .action svg {
        width: 28px;
        height: 28px;
        filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.35));
      }
      .count {
        font-size: 0.85rem;
        color: #fff;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.45);
      }
      .liked svg {
        fill: var(--accent);
      }

      .overlay {
        position: absolute;
        left: 14px;
        right: 76px;
        bottom: 18px;
        z-index: 3;
        color: #fff;
        display: flex;
        flex-direction: column;
        gap: 10px;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.65);
      }
      .user {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 700;
      }
      .follow {
        margin-left: 8px;
        padding: 6px 10px;
        background: var(--accent);
        color: #fff;
        border: 0;
        border-radius: 999px;
        font-weight: 700;
        cursor: pointer;
      }
      .caption {
        font-size: 0.95rem;
        line-height: 1.35;
        max-width: min(560px, 80vw);
      }
      .music {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--muted);
        font-size: 0.9rem;
      }
      .music .disc {
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: conic-gradient(#fff 0 25%, #888 0 50%, #fff 0 75%, #bbb 0);
        animation: spin 6s linear infinite;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .mute-chip {
        position: absolute;
        right: 14px;
        top: 70px;
        z-index: 3;
        background: var(--panel-strong);
        color: #fff;
        padding: 6px 10px;
        border-radius: 999px;
        display: flex;
        align-items: center;
        gap: 6px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        cursor: pointer;
        font-weight: 600;
      }

      .left-nav {
        position: fixed;
        left: 10px;
        top: 50%;
        transform: translateY(-50%);
        display: flex;
        flex-direction: column;
        gap: 10px;
        z-index: 10;
        background: var(--panel);
        padding: 8px;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.08);
      }
      .left-nav a {
        font-size: 0.9rem;
        padding: 8px 10px;
        border-radius: 8px;
        color: #ddd;
      }
      .left-nav a.active,
      .left-nav a:hover {
        background: rgba(255, 255, 255, 0.12);
        color: #fff;
      }

      @media (max-width: 680px) {
        .overlay {
          right: 72px;
        }
        .search {
          display: none;
        }
        .left-nav {
          display: none;
        }
      }

      .hint {
        position: fixed;
        bottom: 10px;
        left: 50%;
        transform: translateX(-50%);
        color: rgba(255, 255, 255, 0.75);
        font-size: 0.85rem;
        z-index: 60;
        background: rgba(0, 0, 0, 0.35);
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.12);
      }
    </style>
  </head>
  <body>
    <div class="topbar">
      <div class="brand">
        <div class="dot"></div>
        <div>Reels</div>
      </div>
      <div class="tabs">
        <button class="active">For You</button>
        <button>Following</button>
        <button>Live</button>
      </div>
      <label class="search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="#bbb">
          <path
            d="M10 2a8 8 0 015.292 13.708l4.5 4.5-1.414 1.414-4.5-4.5A8 8 0 1110 2zm0 2a6 6 0 100 12 6 6 0 000-12z"
          />
        </svg>
        <input placeholder="Search" />
      </label>
    </div>

    <nav class="left-nav">
      <a href="#" class="active">For You</a>
      <a href="#">Following</a>
      <a href="#">Live</a>
    </nav>

    <main class="feed" id="feed">
      <section class="reel" data-id="1">
        <button class="mute-chip">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="#fff">
            <path d="M5 9v6h4l5 5V4L9 9H5z" />
          </svg>
          Sound
        </button>

        <div class="video-wrap">
          <video
            class="video"
            playsinline
            muted
            preload="metadata"
            src="https://cdn.coverr.co/videos/coverr-couple-watching-the-ocean-5137/1080p.mp4"
          ></video>
        </div>

        <aside class="actions">
          <div class="action like">
            <svg viewBox="0 0 24 24" fill="#fff">
              <path
                d="M12.1 21.35l-1.1-1.02C5.14 14.88 2 12.07 2 8.5 2 6 4 4 6.5 4c1.74 0 3.41.81 4.5 2.09C12.59 4.81 14.26 4 16 4 18.5 4 20.5 6 20.5 8.5c0 3.57-3.14 6.38-8.9 11.83l-.5.47z"
              />
            </svg>
            <div class="count">1.2K</div>
          </div>
          <div class="action comment">
            <svg viewBox="0 0 24 24" fill="#fff">
              <path
                d="M20 2H4a2 2 0 00-2 2v18l4-4h14a2 2 0 002-2V4a2 2 0 00-2-2z"
              />
            </svg>
            <div class="count">88</div>
          </div>
          <div class="action share">
            <svg viewBox="0 0 24 24" fill="#fff">
              <path
                d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7a3.3 3.3 0 000-1.39l7-4.11A2.99 2.99 0 0018 7.91 3 3 0 1015 5a3 3 0 00.04.49l-7 4.11a3 3 0 100 4.8l7.04 4.12c-.02.16-.04.32-.04.48a3 3 0 103-3z"
              />
            </svg>
            <div class="count">Share</div>
          </div>
        </aside>

        <div class="overlay">
          <div class="user">
            @ocean.vibes
            <button class="follow">Follow</button>
          </div>
          <div class="caption">
            Sunrise walks hit different. <a href="#">#morning</a>
            <a href="#">#ocean</a>
          </div>
          <div class="music">
            <span class="disc"></span> Original sound • Ocean Vibes
          </div>
        </div>
      </section>
    </main>

    <div class="hint">
      Scroll, click video to pause/play. Press ↑/↓ to move. Toggle “Sound” to
      mute/unmute.
    </div>

    <script>
      const feed = document.getElementById("feed");
      const reels = Array.from(document.querySelectorAll(".reel"));

      const io = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            const video = entry.target.querySelector("video");
            if (!video) return;
            if (entry.isIntersecting && entry.intersectionRatio >= 0.85) {
              document.querySelectorAll("video").forEach((v) => {
                if (v !== video) v.pause();
              });
              video.play().catch(() => {});
            } else {
              video.pause();
            }
          });
        },
        { threshold: [0, 0.5, 0.85, 1] }
      );

      reels.forEach((r) => io.observe(r));

      document.addEventListener("click", (e) => {
        const v = e.target.closest(".reel")?.querySelector("video");
        if (!v) return;
        if (e.target.tagName.toLowerCase() === "video") {
          if (v.paused) v.play();
          else v.pause();
        }
      });

      document.querySelectorAll(".mute-chip").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          e.stopPropagation();
          const reel = btn.closest(".reel");
          const v = reel.querySelector("video");
          v.muted = !v.muted;
        });
      });

      document.querySelectorAll(".reel .like").forEach((el) => {
        el.addEventListener("click", (e) => {
          e.stopPropagation();
          el.classList.toggle("liked");
          const countEl = el.querySelector(".count");
          const raw = countEl.dataset.raw ?? parseCount(countEl.textContent);
          countEl.dataset.raw = raw;
          let val = Number(raw);
          if (el.classList.contains("liked")) val += 1;
          else val -= 1;
          countEl.textContent = formatCount(val);
        });
      });

      function parseCount(txt) {
        txt = txt.replace(/,/g, "").trim();
        if (/k$/i.test(txt)) return Math.round(parseFloat(txt) * 1000);
        if (/m$/i.test(txt)) return Math.round(parseFloat(txt) * 1000000);
        return Number(txt);
      }
      function formatCount(n) {
        if (n >= 1000000)
          return (n / 1000000).toFixed(n % 1000000 ? 1 : 0) + "M";
        if (n >= 1000) return (n / 1000).toFixed(n % 1000 ? 1 : 0) + "K";
        return String(n);
      }

      document.addEventListener("keydown", (e) => {
        if (e.key === "ArrowDown" || e.key === "PageDown") {
          e.preventDefault();
          scrollToNeighbor(1);
        } else if (e.key === "ArrowUp" || e.key === "PageUp") {
          e.preventDefault();
          scrollToNeighbor(-1);
        }
      });

      function scrollToNeighbor(dir) {
        let best = { el: null, vis: 0, idx: -1 };
        reels.forEach((r, i) => {
          const rect = r.getBoundingClientRect();
          const h = window.innerHeight;
          const visible = Math.max(
            0,
            Math.min(rect.bottom, h) - Math.max(rect.top, 0)
          );
          const ratio = visible / h;
          if (ratio > best.vis) {
            best = { el: r, vis: ratio, idx: i };
          }
        });
        let next = Math.min(reels.length - 1, Math.max(0, best.idx + dir));
        reels[next].scrollIntoView({ behavior: "smooth" });
      }

      window.addEventListener("load", () => {
        setTimeout(() => {
          const first = reels[0]?.querySelector("video");
          if (first) first.play().catch(() => {});
        }, 100);
      });
    </script>
  </body>
</html>
